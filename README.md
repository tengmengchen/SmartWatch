# SmartWatch

## 简介

**SmartWatch** 是一款基于 **STM32F411CEU6** 微控制器、**FreeRTOS** 实时操作系统以及 **LVGL** 图形界面库开发的多功能智慧手表项目。该项目集成了多种传感器模块与低功耗设计，适合嵌入式系统学习者进行功能扩展和研究开发。

## 系统组成

本手表集成以下模块与功能：

- **图形界面显示**：基于 **LVGL** 的 LCD 显示界面，支持触控交互、页面切换、时钟/秒表/计算器等小工具。
- **姿态与方向感应**：使用 **LSM303** 三轴加速度计和磁力计模块，实现抬腕唤醒和电子指南针功能。
- **温湿度感知**：通过 **AHT21** 温湿度传感器进行环境温湿度采集。
- **气压与海拔测量**：集成 **SPL06** 气压传感器，实现大气压力和相对海拔高度估算。
- **低功耗管理**：通过进入 Sleep / Stop 模式实现低功耗运行，配合传感器中断和 RTC 唤醒机制节能。
- **实时时钟（RTC）**：内建 RTC 实现系统时间维护和定时唤醒。
- **EEPROM 数据存储**：支持 I2C 接口外部 EEPROM 进行参数或历史数据的保存。
- **FreeRTOS 任务调度**：各模块功能通过 FreeRTOS 的多任务管理协调运行，提升系统响应效率和稳定性。

## 实物图

![SmartWatch 实物图](images/smartwatch_photo.jpg)

## 软件部分设计细节

本项目软件结构基于 FreeRTOS，划分如下模块：

- **GUI 任务**
  - 使用 LVGL 实现 UI 展示与用户交互。
  - 管理首页、天气页、设置页等界面。
- **传感器采集任务**
  - **LSM303**：配置中断实现抬腕检测，定期采集加速度与磁场。
  - **AHT21/SPL06**：周期性采集环境数据，显示在主界面。
- **低功耗处理任务**
  - 根据用户交互超时或外设状态，判断是否进入 Stop 模式。
  - 唤醒后重新配置时钟、恢复任务。
- **RTC 唤醒机制**
  - 配置 RTC 实时唤醒系统，定时刷新界面或检查传感器数据。
- **EEPROM 数据管理**
  - 使用 I2C 接口对系统配置或历史环境数据进行保存与读取。

## 硬件设计说明

本项目硬件基于 STM32F411CEU6 设计，主要结构如下：

- **核心控制单元**
  - MCU：STM32F411CEU6，主频 100MHz，512KB Flash，128KB RAM。
- **显示模块**
  - 1.3 英寸 SPI 接口 LCD 屏幕（240×240 分辨率）。
- **传感器模块**
  - **LSM303**：姿态检测；
  - **AHT21**：温湿度采集；
  - **SPL06**：气压与海拔；
  - 所有传感器通过 I2C 接口连接。
- **存储模块**
  - 外部 EEPROM（I2C），用于保存配置信息与记录数据。
- **交互与按键**
  - 电容触摸模块或物理按键，提供基础用户输入能力。
- **电源管理**
  - 支持锂电池供电，配合 LDO 稳压与低功耗模式设计；
  - 电源检测与切换电路确保系统稳定性。
- **调试接口**
  - 通过 SWD 接口进行调试与程序下载。

---

